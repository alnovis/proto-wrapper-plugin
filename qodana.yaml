#-------------------------------------------------------------------------------
# Qodana configuration for proto-wrapper-plugin
# https://www.jetbrains.com/help/qodana/qodana-yaml.html
#-------------------------------------------------------------------------------

version: "1.0"

# JVM linter for Java + Kotlin
linter: jetbrains/qodana-jvm:2024.3

# Explicitly set project type (required for dual Maven+Gradle projects)
ide:
  jvmProperties:
    - -Dproject.open.type=Maven

# Project profile (inspections to run)
profile:
  name: qodana.recommended

# Paths to exclude from analysis
exclude:
  - name: "**/build/**"
  - name: "**/target/**"
  - name: "**/generated/**"
  - name: "**/generated-sources/**"
  - name: "**/generated-test-sources/**"
  - name: "examples/**"
  - name: "proto-wrapper-golden-tests/**"
  - name: "proto-wrapper-maven-integration-tests/**"
  - name: "proto-wrapper-gradle-integration-tests/**"
  - name: "local-integration-tests/**"
  - name: "test-protos/**"

# Fail CI if threshold exceeded
failThreshold: 100

# Bootstrap commands (build before analysis)
bootstrap: mvn compile test-compile -B -q
