# Proto Wrapper Maven Plugin

[ğŸ‡¬ğŸ‡§ English version](README.md)

Maven-Ğ¿Ğ»Ğ°Ğ³Ğ¸Ğ½ Ğ´Ğ»Ñ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ Ğ²ĞµÑ€ÑĞ¸Ğ¾Ğ½Ğ½Ğ¾-Ğ½ĞµĞ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ñ‹Ñ… Java wrapper-ĞºĞ»Ğ°ÑÑĞ¾Ğ² Ğ¸Ğ· Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¸Ñ… Ğ²ĞµÑ€ÑĞ¸Ğ¹ protobuf-ÑÑ…ĞµĞ¼.

## Ğ’Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸

- ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ¿Ğ°Ñ€ÑĞ¸Ğ½Ğ³ `.proto` Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ² Ñ‡ĞµÑ€ĞµĞ· `protoc`
- Ğ¡Ğ»Ğ¸ÑĞ½Ğ¸Ğµ Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¸Ñ… Ğ²ĞµÑ€ÑĞ¸Ğ¹ ÑÑ…ĞµĞ¼ Ğ² ĞµĞ´Ğ¸Ğ½Ñ‹Ğ¹ API
- Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ:
  - Ğ’ĞµÑ€ÑĞ¸Ğ¾Ğ½Ğ½Ğ¾-Ğ½ĞµĞ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ñ‹Ñ… Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹ÑĞ¾Ğ²
  - ĞĞ±ÑÑ‚Ñ€Ğ°ĞºÑ‚Ğ½Ñ‹Ñ… Ğ±Ğ°Ğ·Ğ¾Ğ²Ñ‹Ñ… ĞºĞ»Ğ°ÑÑĞ¾Ğ² (Ğ¿Ğ°Ñ‚Ñ‚ĞµÑ€Ğ½ Template Method)
  - Ğ’ĞµÑ€ÑĞ¸Ğ¾Ğ½Ğ½Ğ¾-ÑĞ¿ĞµÑ†Ğ¸Ñ„Ğ¸Ñ‡Ğ½Ñ‹Ñ… Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¹
  - VersionContext Ğ´Ğ»Ñ Ñ„Ğ°Ğ±Ñ€Ğ¸Ñ‡Ğ½Ñ‹Ñ… Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹
- ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ¾Ğ±Ğ½Ğ°Ñ€ÑƒĞ¶ĞµĞ½Ğ¸Ğµ ÑĞºĞ²Ğ¸Ğ²Ğ°Ğ»ĞµĞ½Ñ‚Ğ½Ñ‹Ñ… enum'Ğ¾Ğ² (nested vs top-level)
- ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° ĞºĞ¾Ğ½Ñ„Ğ»Ğ¸ĞºÑ‚Ğ¾Ğ² Ñ‚Ğ¸Ğ¿Ğ¾Ğ² Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ²ĞµÑ€ÑĞ¸ÑĞ¼Ğ¸ (intâ†’Long, Ğ½ĞµÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ñ‹Ğµ Ñ‚Ğ¸Ğ¿Ñ‹)
- Ğ˜Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµĞ¼Ñ‹Ñ… Ğ²ĞµÑ€ÑĞ¸ÑÑ… Ğ² Javadoc

## Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ°

```bash
cd proto-wrapper-plugin
mvn install
```

## Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

### ĞœĞ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ°Ñ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ (Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞµÑ‚ÑÑ)

Ğ£ĞºĞ°Ğ¶Ğ¸Ñ‚Ğµ `basePackage`, `protoRoot` Ğ¸ Ğ´Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ğ¸ Ñ proto Ñ„Ğ°Ğ¹Ğ»Ğ°Ğ¼Ğ¸ - Ğ¿Ğ»Ğ°Ğ³Ğ¸Ğ½ ÑĞ´ĞµĞ»Ğ°ĞµÑ‚ Ğ¾ÑÑ‚Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ:

```xml
<plugin>
    <groupId>space.alnovis</groupId>
    <artifactId>proto-wrapper-maven-plugin</artifactId>
    <version>1.0.0-SNAPSHOT</version>
    <configuration>
        <basePackage>com.mycompany.myapp.model</basePackage>
        <protoRoot>${basedir}/src/main/proto</protoRoot>
        <versions>
            <version>
                <protoDir>v1</protoDir>
            </version>
            <version>
                <protoDir>v2</protoDir>
            </version>
        </versions>
    </configuration>
    <executions>
        <execution>
            <goals>
                <goal>generate</goal>
            </goals>
        </execution>
    </executions>
</plugin>
```

ĞšĞ»Ğ°ÑÑÑ‹ Ğ±ÑƒĞ´ÑƒÑ‚ ÑĞ³ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ñ‹ Ğ²:
- `com.mycompany.myapp.model.api` - Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹ÑÑ‹, enum'Ñ‹ Ğ¸ Ğ°Ğ±ÑÑ‚Ñ€Ğ°ĞºÑ‚Ğ½Ñ‹Ğµ ĞºĞ»Ğ°ÑÑÑ‹
- `com.mycompany.myapp.model.v1` - Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ Ğ´Ğ»Ñ v1
- `com.mycompany.myapp.model.v2` - Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ Ğ´Ğ»Ñ v2

ĞŸĞ»Ğ°Ğ³Ğ¸Ğ½ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸:
1. ĞĞ°Ğ¹Ğ´Ñ‘Ñ‚ Ğ²ÑĞµ `.proto` Ñ„Ğ°Ğ¹Ğ»Ñ‹ Ğ² ĞºĞ°Ğ¶Ğ´Ğ¾Ğ¹ Ğ´Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ğ¸
2. Ğ’Ñ‹Ğ·Ğ¾Ğ²ĞµÑ‚ `protoc` Ğ´Ğ»Ñ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ Ğ´ĞµÑĞºÑ€Ğ¸Ğ¿Ñ‚Ğ¾Ñ€Ğ¾Ğ²
3. ĞŸÑ€Ğ¾Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒĞµÑ‚ proto Ñ„Ğ°Ğ¹Ğ»Ñ‹ Ğ¸ ÑĞ¾Ğ·Ğ´Ğ°ÑÑ‚ Ğ¼Ğ°Ğ¿Ğ¿Ğ¸Ğ½Ğ³Ğ¸ ĞºĞ»Ğ°ÑÑĞ¾Ğ²
4. Ğ¡Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµÑ‚ Ğ²ÑĞµ wrapper-ĞºĞ»Ğ°ÑÑÑ‹

### Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸

```bash
mvn generate-sources
# Ğ¸Ğ»Ğ¸
mvn compile
```

### Ğ Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ½Ğ°Ñ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ

```xml
<plugin>
    <groupId>space.alnovis</groupId>
    <artifactId>proto-wrapper-maven-plugin</artifactId>
    <version>1.0.0-SNAPSHOT</version>
    <configuration>
        <!-- Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹ Ğ¿Ğ°ĞºĞµÑ‚ Ğ´Ğ»Ñ Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµĞ¼Ñ‹Ñ… ĞºĞ»Ğ°ÑÑĞ¾Ğ² -->
        <basePackage>com.mycompany.myapp.model</basePackage>

        <!-- ĞšĞ¾Ñ€Ğ½ĞµĞ²Ğ°Ñ Ğ´Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ñ Ñ proto Ñ„Ğ°Ğ¹Ğ»Ğ°Ğ¼Ğ¸ -->
        <protoRoot>${basedir}/proto</protoRoot>

        <!-- ĞŸĞ°Ñ‚Ñ‚ĞµÑ€Ğ½ Ğ¿Ğ°ĞºĞµÑ‚Ğ° Ğ´Ğ»Ñ proto-ĞºĞ»Ğ°ÑÑĞ¾Ğ² (ÑĞ³ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ñ… protoc) -->
        <protoPackagePattern>com.mycompany.myapp.proto.{version}</protoPackagePattern>

        <!-- Ğ”Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ´Ğ»Ñ ÑĞ³ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ñ… Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ² -->
        <outputDirectory>${project.build.directory}/generated-sources/proto-wrapper</outputDirectory>

        <versions>
            <version>
                <!-- Ğ”Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ¾Ñ‚Ğ½Ğ¾ÑĞ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ protoRoot -->
                <protoDir>v1</protoDir>
                <!-- ĞĞ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾: Ğ¸Ğ¼Ñ Ğ²ĞµÑ€ÑĞ¸Ğ¸ (Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ - uppercase Ğ¾Ñ‚ protoDir) -->
                <name>V1</name>
                <!-- ĞĞ¿Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾: Ğ¸ÑĞºĞ»ÑÑ‡Ğ¸Ñ‚ÑŒ Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»Ñ‘Ğ½Ğ½Ñ‹Ğµ proto Ñ„Ğ°Ğ¹Ğ»Ñ‹ -->
                <excludeProtos>
                    <excludeProto>internal.proto</excludeProto>
                    <excludeProto>deprecated.proto</excludeProto>
                </excludeProtos>
            </version>
            <version>
                <protoDir>v2</protoDir>
            </version>
        </versions>
    </configuration>
</plugin>
```

## Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµĞ¼Ğ¾Ğ³Ğ¾ ĞºĞ¾Ğ´Ğ°

ĞŸÑ€Ğ¸ `basePackage=com.mycompany.myapp.model`:

```
target/generated-sources/proto-wrapper/
â”œâ”€â”€ com/mycompany/myapp/model/api/
â”‚   â”œâ”€â”€ Money.java                    # Ğ˜Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ
â”‚   â”œâ”€â”€ DateTime.java                 # Ğ˜Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ
â”‚   â”œâ”€â”€ Order.java                    # Ğ˜Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ Ñ nested Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹ÑĞ°Ğ¼Ğ¸
â”‚   â”œâ”€â”€ PaymentTypeEnum.java          # Enum
â”‚   â”œâ”€â”€ VersionContext.java           # Ğ¤Ğ°Ğ±Ñ€Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ
â”‚   â””â”€â”€ impl/
â”‚       â”œâ”€â”€ AbstractMoney.java        # ĞĞ±ÑÑ‚Ñ€Ğ°ĞºÑ‚Ğ½Ñ‹Ğ¹ Ğ±Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹ ĞºĞ»Ğ°ÑÑ
â”‚       â”œâ”€â”€ AbstractDateTime.java
â”‚       â””â”€â”€ AbstractOrder.java
â”œâ”€â”€ com/mycompany/myapp/model/v1/
â”‚   â”œâ”€â”€ MoneyV1.java                  # Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
â”‚   â”œâ”€â”€ DateTimeV1.java
â”‚   â”œâ”€â”€ OrderV1.java
â”‚   â””â”€â”€ VersionContextV1.java
â””â”€â”€ com/mycompany/myapp/model/v2/
    â”œâ”€â”€ MoneyV2.java
    â”œâ”€â”€ DateTimeV2.java
    â”œâ”€â”€ OrderV2.java
    â””â”€â”€ VersionContextV2.java
```

## ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹ ÑĞ³ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğ³Ğ¾ ĞºĞ¾Ğ´Ğ°

### Ğ˜Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ

```java
/**
 * Version-agnostic interface for Money.
 *
 * <p>Supported in versions: [v1, v2]</p>
 */
public interface Money {
    long getBills();
    int getCoins();

    /** @return Protocol version (e.g., 1, 2) */
    int getWrapperVersion();

    /** Serialize to protobuf bytes. */
    byte[] toBytes();

    /** Convert to a specific version implementation. */
    <T extends Money> T asVersion(Class<T> versionClass);
}
```

### ĞĞ±ÑÑ‚Ñ€Ğ°ĞºÑ‚Ğ½Ñ‹Ğ¹ ĞºĞ»Ğ°ÑÑ

```java
public abstract class AbstractMoney<PROTO extends Message> implements Money {
    protected final PROTO proto;

    protected AbstractMoney(PROTO proto) {
        this.proto = proto;
    }

    protected abstract long extractBills(PROTO proto);
    protected abstract int extractCoins(PROTO proto);

    @Override
    public final long getBills() {
        return extractBills(proto);
    }

    @Override
    public final int getCoins() {
        return extractCoins(proto);
    }
}
```

### Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ

```java
public class MoneyV1 extends AbstractMoney<Common.Money> {

    public MoneyV1(Common.Money proto) {
        super(proto);
    }

    @Override
    protected long extractBills(Common.Money proto) {
        return proto.getBills();
    }

    @Override
    protected int extractCoins(Common.Money proto) {
        return proto.getCoins();
    }

    public static MoneyV1 from(Common.Money proto) {
        return new MoneyV1(proto);
    }
}
```

### Enum Ñ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸ĞµĞ¹ Ğ¾ Ğ²ĞµÑ€ÑĞ¸ÑÑ…

```java
/**
 * Version-agnostic enum for PaymentTypeEnum.
 *
 * <p>Supported in versions: [v1, v2]</p>
 */
public enum PaymentTypeEnum {
    CASH(0),
    CARD(1),

    /**
     * Present only in versions: [v1]
     */
    CREDIT(2),

    /**
     * Present only in versions: [v1]
     */
    TARE(3),

    MOBILE(4);

    // ...
}
```

### VersionContext

```java
// ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚Ğ° Ğ´Ğ»Ñ Ğ²ĞµÑ€ÑĞ¸Ğ¸
VersionContext ctx = VersionContext.forVersion(2);

// ĞĞ±Ñ‘Ñ€Ñ‚Ñ‹Ğ²Ğ°Ğ½Ğ¸Ğµ proto-ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ
Money money = ctx.wrapMoney(protoMessage);
Order order = ctx.wrapOrder(orderProto);
```

## ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸

### ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹

| ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€ | ĞŸĞ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|----------|--------------|----------|
| `basePackage` | - | Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹ Ğ¿Ğ°ĞºĞµÑ‚ Ğ´Ğ»Ñ Ğ²ÑĞµÑ… Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµĞ¼Ñ‹Ñ… ĞºĞ»Ğ°ÑÑĞ¾Ğ² |
| `protoRoot` | - | ĞšĞ¾Ñ€Ğ½ĞµĞ²Ğ°Ñ Ğ´Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ñ Ñ proto Ñ„Ğ°Ğ¹Ğ»Ğ°Ğ¼Ğ¸ |
| `versions` | (Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹) | Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¹ Ğ²ĞµÑ€ÑĞ¸Ğ¹ |
| `outputDirectory` | `${project.build.directory}/generated-sources/proto-wrapper` | Ğ”Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ´Ğ»Ñ ÑĞ³ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ñ… Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ² |
| `protoPackagePattern` | `{basePackage}.proto.{version}` | ĞŸĞ°Ñ‚Ñ‚ĞµÑ€Ğ½ Ğ¿Ğ°ĞºĞµÑ‚Ğ° Ğ´Ğ»Ñ proto-ĞºĞ»Ğ°ÑÑĞ¾Ğ² |
| `generateInterfaces` | `true` | Ğ“ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹ÑÑ‹ |
| `generateAbstractClasses` | `true` | Ğ“ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ°Ğ±ÑÑ‚Ñ€Ğ°ĞºÑ‚Ğ½Ñ‹Ğµ Ğ±Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğµ ĞºĞ»Ğ°ÑÑÑ‹ |
| `generateImplClasses` | `true` | Ğ“ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ²ĞµÑ€ÑĞ¸Ğ¾Ğ½Ğ½Ğ¾-ÑĞ¿ĞµÑ†Ğ¸Ñ„Ğ¸Ñ‡Ğ½Ñ‹Ğµ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ |
| `generateVersionContext` | `true` | Ğ“ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ VersionContext Ñ„Ğ°Ğ±Ñ€Ğ¸ĞºÑƒ |
| `includeVersionSuffix` | `true` | Ğ’ĞºĞ»ÑÑ‡Ğ°Ñ‚ÑŒ ÑÑƒÑ„Ñ„Ğ¸ĞºÑ Ğ²ĞµÑ€ÑĞ¸Ğ¸ Ğ² Ğ¸Ğ¼ĞµĞ½Ğ° impl ĞºĞ»Ğ°ÑÑĞ¾Ğ² (MoneyV1 vs Money) |
| `includeMessages` | - | Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ¸Ğ¼Ñ‘Ğ½ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ Ğ´Ğ»Ñ Ğ²ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ (Ğ¿ÑƒÑÑ‚Ğ¾ = Ğ²ÑĞµ) |
| `excludeMessages` | - | Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ¸Ğ¼Ñ‘Ğ½ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ Ğ´Ğ»Ñ Ğ¸ÑĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ |

### ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ Ğ²ĞµÑ€ÑĞ¸Ğ¸

| ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|----------|----------|
| `protoDir` | Ğ”Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ñ Ñ proto Ñ„Ğ°Ğ¹Ğ»Ğ°Ğ¼Ğ¸ Ğ¾Ñ‚Ğ½Ğ¾ÑĞ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ `protoRoot` |
| `name` | Ğ˜Ğ¼Ñ Ğ²ĞµÑ€ÑĞ¸Ğ¸ (Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ - uppercase Ğ¾Ñ‚ `protoDir`, Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€ `v1` â†’ `V1`) |
| `excludeProtos` | Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº proto Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ² Ğ´Ğ»Ñ Ğ¸ÑĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ |

### Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»ÑĞµĞ¼Ñ‹Ğµ Ğ¿Ğ°ĞºĞµÑ‚Ñ‹

ĞŸÑ€Ğ¸ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞµ `basePackage` Ğ¾ÑÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¿Ğ°ĞºĞµÑ‚Ñ‹ Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ÑÑÑ‚ÑÑ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸:
- `apiPackage` = `basePackage` + `.api`
- `implPackagePattern` = `basePackage` + `.{version}`

## ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ñ€Ğ°Ğ·Ğ»Ğ¸Ñ‡Ğ¸Ğ¹ Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ²ĞµÑ€ÑĞ¸ÑĞ¼Ğ¸

### ĞšĞ¾Ğ½Ñ„Ğ»Ğ¸ĞºÑ‚Ñ‹ Ñ‚Ğ¸Ğ¿Ğ¾Ğ²

ĞŸĞ»Ğ°Ğ³Ğ¸Ğ½ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ ÑĞ¸Ñ‚ÑƒĞ°Ñ†Ğ¸Ğ¸, ĞºĞ¾Ğ³Ğ´Ğ° Ñ‚Ğ¸Ğ¿ Ğ¿Ğ¾Ğ»Ñ Ñ€Ğ°Ğ·Ğ»Ğ¸Ñ‡Ğ°ĞµÑ‚ÑÑ Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ²ĞµÑ€ÑĞ¸ÑĞ¼Ğ¸:

| Ğ¡Ğ¸Ñ‚ÑƒĞ°Ñ†Ğ¸Ñ | Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ |
|----------|---------|
| `int` Ğ² v1 â†’ `long` Ğ² v2 | Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ `long`, Ğ² v1 Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½ÑĞµÑ‚ÑÑ cast `(long)` |
| `int` Ğ² v1 â†’ `enum` Ğ² v2 | Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ `int`, enum ĞºĞ¾Ğ½Ğ²ĞµÑ€Ñ‚Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ Ñ‡ĞµÑ€ĞµĞ· `getNumber()` |
| ĞĞµÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ñ‹Ğµ Ñ‚Ğ¸Ğ¿Ñ‹ (message vs primitive) | ĞŸĞ¾Ğ»Ğµ Ğ¿Ğ¾Ğ¼ĞµÑ‡Ğ°ĞµÑ‚ÑÑ ĞºĞ°Ğº Ğ¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ğ²ÑƒÑÑ‰ĞµĞµ Ğ² ĞºĞ¾Ğ½Ñ„Ğ»Ğ¸ĞºÑ‚ÑƒÑÑ‰ĞµĞ¹ Ğ²ĞµÑ€ÑĞ¸Ğ¸ |

### Ğ­ĞºĞ²Ğ¸Ğ²Ğ°Ğ»ĞµĞ½Ñ‚Ğ½Ñ‹Ğµ enum'Ñ‹

Ğ•ÑĞ»Ğ¸ enum Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»Ñ‘Ğ½ ĞºĞ°Ğº nested Ğ² Ğ¾Ğ´Ğ½Ğ¾Ğ¹ Ğ²ĞµÑ€ÑĞ¸Ğ¸ Ğ¸ ĞºĞ°Ğº top-level Ğ² Ğ´Ñ€ÑƒĞ³Ğ¾Ğ¹:

```protobuf
// v1: nested enum
message Product {
  enum TaxTypeEnum { VAT = 100; }
}

// v2: top-level enum (Ğ² Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ğ¾Ğ¼ Ñ„Ğ°Ğ¹Ğ»Ğµ)
enum TaxTypeEnum { VAT = 100; }
```

ĞŸĞ»Ğ°Ğ³Ğ¸Ğ½ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸:
1. ĞĞ±Ğ½Ğ°Ñ€ÑƒĞ¶Ğ¸Ñ‚ ÑĞºĞ²Ğ¸Ğ²Ğ°Ğ»ĞµĞ½Ñ‚Ğ½Ğ¾ÑÑ‚ÑŒ Ğ¿Ğ¾ Ğ¸Ğ¼ĞµĞ½Ğ¸ Ğ¸ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸ÑĞ¼
2. Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ ĞµĞ´Ğ¸Ğ½Ñ‹Ğ¹ top-level enum
3. Ğ£Ğ´Ğ°Ğ»Ğ¸Ñ‚ Ğ´ÑƒĞ±Ğ»Ğ¸Ñ€ÑƒÑÑ‰Ğ¸Ğ¹ÑÑ nested enum

## ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Proto Files                              â”‚
â”‚                    v1/*.proto, v2/*.proto                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ProtocExecutor                           â”‚
â”‚            Ğ’Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ protoc, Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµÑ‚ Ğ´ĞµÑĞºÑ€Ğ¸Ğ¿Ñ‚Ğ¾Ñ€Ñ‹          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ProtoAnalyzer                            â”‚
â”‚          ĞŸĞ°Ñ€ÑĞ¸Ñ‚ Ğ´ĞµÑĞºÑ€Ğ¸Ğ¿Ñ‚Ğ¾Ñ€Ñ‹ Ğ² VersionSchema                 â”‚
â”‚          Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€ÑƒĞµÑ‚ Ğ¿Ğ¾ sourcePrefix (Ğ´Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ğ¸)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    VersionMerger                            â”‚
â”‚         ĞĞ±ÑŠĞµĞ´Ğ¸Ğ½ÑĞµÑ‚ ÑÑ…ĞµĞ¼Ñ‹ Ğ² ĞµĞ´Ğ¸Ğ½ÑƒÑ MergedSchema              â”‚
â”‚         ĞĞ±Ğ½Ğ°Ñ€ÑƒĞ¶Ğ¸Ğ²Ğ°ĞµÑ‚ ÑĞºĞ²Ğ¸Ğ²Ğ°Ğ»ĞµĞ½Ñ‚Ğ½Ñ‹Ğµ enum'Ñ‹                   â”‚
â”‚         ĞĞ±Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ ĞºĞ¾Ğ½Ñ„Ğ»Ğ¸ĞºÑ‚Ñ‹ Ñ‚Ğ¸Ğ¿Ğ¾Ğ²                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                GenerationOrchestrator                       â”‚
â”‚         ĞšĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ¸Ñ€ÑƒĞµÑ‚ Ğ²ÑĞµ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ‚Ğ¾Ñ€Ñ‹                         â”‚
â”‚         Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ GenerationContext Ğ´Ğ»Ñ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â–¼               â–¼               â–¼               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Interface    â”‚ â”‚  AbstractClass  â”‚ â”‚    ImplClass    â”‚ â”‚ VersionContext  â”‚
â”‚    Generator    â”‚ â”‚   Generator     â”‚ â”‚   Generator     â”‚ â”‚   Generator     â”‚
â”‚  (BaseGenerator)â”‚ â”‚ (BaseGenerator) â”‚ â”‚ (BaseGenerator) â”‚ â”‚ (BaseGenerator) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚               â”‚               â”‚               â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              TypeResolver + JavaTypeMapping                 â”‚
â”‚         ĞĞ±Ñ‰Ğ°Ñ Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° Ñ€Ğ°Ğ·Ñ€ĞµÑˆĞµĞ½Ğ¸Ñ Ñ‚Ğ¸Ğ¿Ğ¾Ğ²                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    JavaPoet                                 â”‚
â”‚              Ğ“ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµÑ‚ .java Ğ¸ÑÑ…Ğ¾Ğ´Ğ½Ñ‹Ğµ Ñ„Ğ°Ğ¹Ğ»Ñ‹                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹

| ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|-----------|----------|
| `GenerateMojo` | Ğ¢Ğ¾Ñ‡ĞºĞ° Ğ²Ñ…Ğ¾Ğ´Ğ° Maven-Ğ¿Ğ»Ğ°Ğ³Ğ¸Ğ½Ğ°, Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸ |
| `ProtocExecutor` | Ğ’Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ ĞºĞ¾Ğ¼Ğ¿Ğ¸Ğ»ÑÑ‚Ğ¾Ñ€ protoc, Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµÑ‚ Ğ´ĞµÑĞºÑ€Ğ¸Ğ¿Ñ‚Ğ¾Ñ€Ñ‹ |
| `ProtoAnalyzer` | ĞŸĞ°Ñ€ÑĞ¸Ñ‚ protobuf Ğ´ĞµÑĞºÑ€Ğ¸Ğ¿Ñ‚Ğ¾Ñ€Ñ‹ Ğ² Ğ¾Ğ±ÑŠĞµĞºÑ‚Ñ‹ Ğ¼Ğ¾Ğ´ĞµĞ»Ğ¸ |
| `VersionMerger` | ĞĞ±ÑŠĞµĞ´Ğ¸Ğ½ÑĞµÑ‚ ÑÑ…ĞµĞ¼Ñ‹ Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¸Ñ… Ğ²ĞµÑ€ÑĞ¸Ğ¹ Ğ² ĞµĞ´Ğ¸Ğ½ÑƒÑ ÑÑ…ĞµĞ¼Ñƒ |
| `GenerationOrchestrator` | ĞšĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ¸Ñ€ÑƒĞµÑ‚ Ğ²ÑÑ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ ĞºĞ¾Ğ´Ğ° |
| `GenerationContext` | Immutable ĞºĞ¾Ğ½Ñ‚ĞµĞºÑÑ‚ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ (ÑÑ…ĞµĞ¼Ğ°, ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³, Ğ²ĞµÑ€ÑĞ¸Ñ) |
| `TypeResolver` | Ğ Ğ°Ğ·Ñ€ĞµÑˆĞ°ĞµÑ‚ Java Ñ‚Ğ¸Ğ¿Ñ‹ Ğ¸Ğ· proto Ñ‚Ğ¸Ğ¿Ğ¾Ğ² |
| `BaseGenerator` | ĞĞ±ÑÑ‚Ñ€Ğ°ĞºÑ‚Ğ½Ñ‹Ğ¹ Ğ±Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹ ĞºĞ»Ğ°ÑÑ Ğ´Ğ»Ñ Ğ²ÑĞµÑ… Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ‚Ğ¾Ñ€Ğ¾Ğ² |
| `PluginLogger` | Callback-based Ğ°Ğ±ÑÑ‚Ñ€Ğ°ĞºÑ†Ğ¸Ñ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ |

## ĞĞ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸Ñ

- ĞŸĞ¾Ğ»Ñ `oneof` Ğ½Ğµ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ÑÑ‚ÑÑ
- ĞŸĞ¾Ğ»Ñ `map` Ğ¸Ğ¼ĞµÑÑ‚ Ğ±Ğ°Ğ·Ğ¾Ğ²ÑƒÑ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºÑƒ
- Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ñ‹Ğµ Ğ¸ĞµÑ€Ğ°Ñ€Ñ…Ğ¸Ğ¸ Ğ²Ğ»Ğ¾Ğ¶ĞµĞ½Ğ½Ñ‹Ñ… ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğ¹ Ğ¼Ğ¾Ğ³ÑƒÑ‚ Ğ¿Ğ¾Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ€ÑƒÑ‡Ğ½Ğ¾Ğ¹ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸

## Ğ Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ°

```bash
# Ğ¡Ğ±Ğ¾Ñ€ĞºĞ°
mvn clean install

# Ğ—Ğ°Ğ¿ÑƒÑĞº Ñ‚ĞµÑÑ‚Ğ¾Ğ²
mvn test

# Ğ¡Ğ±Ğ¾Ñ€ĞºĞ° Ğ±ĞµĞ· Ñ‚ĞµÑÑ‚Ğ¾Ğ²
mvn install -DskipTests
```

## ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ ÑĞ³ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ñ… ĞºĞ»Ğ°ÑÑĞ¾Ğ²

```java
// ĞŸĞ°Ñ€ÑĞ¸Ğ½Ğ³ proto-ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ
byte[] protoBytes = ...;
OrderProto.Order protoOrder = OrderProto.Order.parseFrom(protoBytes);

// ĞĞ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Ğ²ĞµÑ€ÑĞ¸Ğ¸ Ğ¸ Ğ¾Ğ±Ñ‘Ñ€Ñ‚Ñ‹Ğ²Ğ°Ğ½Ğ¸Ğµ
int version = 2;
VersionContext ctx = VersionContext.forVersion(version);
Order order = ctx.wrapOrder(protoOrder);

// Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ²ĞµÑ€ÑĞ¸Ğ¾Ğ½Ğ½Ğ¾-Ğ½ĞµĞ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾Ğ³Ğ¾ API
DateTime dateTime = order.getDateTime();
List<Order.Item> items = order.getItems();
OperationTypeEnum operation = order.getOperation();

// Ğ¡ĞµÑ€Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¾Ğ±Ñ€Ğ°Ñ‚Ğ½Ğ¾ Ğ² proto
byte[] outputBytes = order.toBytes();
```
