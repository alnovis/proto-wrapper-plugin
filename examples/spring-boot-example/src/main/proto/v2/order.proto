syntax = "proto2";

package com.example.demo.api.v2;

option java_package = "com.example.demo.api.v2";
option java_outer_classname = "Order";

message OrderData {
    required string id = 1;
    required string customer_name = 2;
    repeated OrderItem items = 3;
    required double total = 4;
    // New in v2
    optional string status = 5;
    optional int64 created_at = 6;
    optional ShippingAddress shipping_address = 7;
}

message OrderItem {
    required string product_id = 1;
    required string name = 2;
    required int32 quantity = 3;
    required double price = 4;
    // New in v2
    optional double discount = 5;
}

// New message in v2
message ShippingAddress {
    required string street = 1;
    required string city = 2;
    required string country = 3;
    required string postal_code = 4;
}

message CreateOrderRequest {
    required string customer_name = 1;
    repeated OrderItem items = 2;
    // New in v2
    optional ShippingAddress shipping_address = 3;
}

message CreateOrderResponse {
    required OrderData order = 1;
}
